import{r as n,j as s,P as c}from"./index-BJ5GaQx0.js";const x=({audioContext:l,shouldPlay:d=!1,tracks:a=[],isReverbEnabled:p=!1,setIsReverbEnabled:m})=>{console.log("Tracks:",a);const[r,h]=n.useState(a[0]||null),[f,b]=n.useState(.05),t=n.useRef(new Audio),o=n.useRef(null),u=n.useRef(null),g=n.useCallback(()=>{if(!r||!r.src){console.error("Current track is not set or has no src");return}console.log("Loading and playing audio:",r.src),t.current.src=r.src,t.current.load(),t.current.play().then(()=>{console.log("Playback started successfully")}).catch(e=>console.error("Playback failed:",e))},[r]);n.useEffect(()=>{d&&r&&g();const e=t.current;return()=>{e.pause()}},[d,r,g]),n.useEffect(()=>(d&&l&&t.current.src&&(o.current||(o.current=l.createMediaElementSource(t.current),u.current=l.createGain(),u.current.gain.value=f,o.current.connect(u.current),u.current.connect(l.destination))),()=>{o.current&&o.current.disconnect()}),[d,l,f]);const v=n.useCallback(e=>{const i=a.find(j=>j.id===parseInt(e.target.value,10));i&&h(i)},[a]),R=e=>{const i=parseFloat(e.target.value);b(i),u.current&&(u.current.gain.value=i)};return a.length?s.jsxs("div",{children:[s.jsx("select",{onChange:v,value:r?r.id:"",children:a.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))}),s.jsxs("button",{onClick:()=>m(!p),children:[p?"Disable":"Enable"," Reverb"]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"volume",children:"Volume:"}),s.jsx("input",{id:"volume",type:"range",min:"0",max:"1",step:"0.01",value:f,onChange:R})]}),s.jsx("audio",{ref:t})]}):s.jsx("div",{children:"No tracks available"})};x.propTypes={audioContext:c.object.isRequired,shouldPlay:c.bool,tracks:c.arrayOf(c.shape({id:c.number.isRequired,name:c.string.isRequired,src:c.string.isRequired})).isRequired,isReverbEnabled:c.bool,setIsReverbEnabled:c.func.isRequired};export{x as default};
